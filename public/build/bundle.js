var app=function(){"use strict";function t(){}function e(t,e){for(const n in e)t[n]=e[n];return t}function n(t){return t()}function o(){return Object.create(null)}function r(t){t.forEach(n)}function s(t){return"function"==typeof t}function c(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function l(t,n,o,r){return t[1]&&r?e(o.ctx.slice(),t[1](r(n))):o.ctx}function i(t,e,n,o,r,s,c){const i=function(t,e,n,o){if(t[2]&&o){const r=t[2](o(n));if(void 0===e.dirty)return r;if("object"==typeof r){const t=[],n=Math.max(e.dirty.length,r.length);for(let o=0;o<n;o+=1)t[o]=e.dirty[o]|r[o];return t}return e.dirty|r}return e.dirty}(e,o,r,s);if(i){const r=l(e,n,o,c);t.p(r,i)}}function a(t,e){t.appendChild(e)}function u(t,e,n){t.insertBefore(e,n||null)}function d(t){t.parentNode.removeChild(t)}function f(t){return document.createElement(t)}function $(t){return document.createTextNode(t)}function p(){return $(" ")}function g(t,e,n,o){return t.addEventListener(e,n,o),()=>t.removeEventListener(e,n,o)}function m(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function h(t,e){t.value=null==e?"":e}function b(t,e,n){t.classList[n?"add":"remove"](e)}let v;function y(t){v=t}function k(){if(!v)throw new Error("Function called outside component initialization");return v}function w(t){k().$$.on_mount.push(t)}function x(){const t=k();return(e,n)=>{const o=t.$$.callbacks[e];if(o){const r=function(t,e){const n=document.createEvent("CustomEvent");return n.initCustomEvent(t,!1,!1,e),n}(e,n);o.slice().forEach((e=>{e.call(t,r)}))}}}const _=[],C=[],E=[],A=[],S=Promise.resolve();let j=!1;function z(t){E.push(t)}function I(t){A.push(t)}let M=!1;const P=new Set;function q(){if(!M){M=!0;do{for(let t=0;t<_.length;t+=1){const e=_[t];y(e),O(e.$$)}for(y(null),_.length=0;C.length;)C.pop()();for(let t=0;t<E.length;t+=1){const e=E[t];P.has(e)||(P.add(e),e())}E.length=0}while(_.length);for(;A.length;)A.pop()();j=!1,M=!1,P.clear()}}function O(t){if(null!==t.fragment){t.update(),r(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(z)}}const D=new Set;let B;function L(t,e){t&&t.i&&(D.delete(t),t.i(e))}function N(t,e,n,o){if(t&&t.o){if(D.has(t))return;D.add(t),B.c.push((()=>{D.delete(t),o&&(n&&t.d(1),o())})),t.o(e)}}function T(t,e){N(t,1,1,(()=>{e.delete(t.key)}))}function F(t,e,n){const o=t.$$.props[e];void 0!==o&&(t.$$.bound[o]=n,n(t.$$.ctx[o]))}function H(t){t&&t.c()}function G(t,e,o){const{fragment:c,on_mount:l,on_destroy:i,after_update:a}=t.$$;c&&c.m(e,o),z((()=>{const e=l.map(n).filter(s);i?i.push(...e):r(e),t.$$.on_mount=[]})),a.forEach(z)}function J(t,e){const n=t.$$;null!==n.fragment&&(r(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function K(t,e){-1===t.$$.dirty[0]&&(_.push(t),j||(j=!0,S.then(q)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function Q(e,n,s,c,l,i,a=[-1]){const u=v;y(e);const f=e.$$={fragment:null,ctx:null,props:i,update:t,not_equal:l,bound:o(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(u?u.$$.context:[]),callbacks:o(),dirty:a,skip_bound:!1};let $=!1;if(f.ctx=s?s(e,n.props||{},((t,n,...o)=>{const r=o.length?o[0]:n;return f.ctx&&l(f.ctx[t],f.ctx[t]=r)&&(!f.skip_bound&&f.bound[t]&&f.bound[t](r),$&&K(e,t)),n})):[],f.update(),$=!0,r(f.before_update),f.fragment=!!c&&c(f.ctx),n.target){if(n.hydrate){const t=function(t){return Array.from(t.childNodes)}(n.target);f.fragment&&f.fragment.l(t),t.forEach(d)}else f.fragment&&f.fragment.c();n.intro&&L(e.$$.fragment),G(e,n.target,n.anchor),q()}y(u)}class R{$destroy(){J(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}function U(e){let n,o,s;return{c(){n=f("input"),m(n,"class","card-maker__text svelte-spu3vm"),m(n,"style",e[3]),n.disabled=e[1],m(n,"clas","")},m(t,r){u(t,n,r),h(n,e[0]),e[6](n),o||(s=[g(n,"input",e[5]),g(n,"input",V)],o=!0)},p(t,[e]){8&e&&m(n,"style",t[3]),2&e&&(n.disabled=t[1]),1&e&&n.value!==t[0]&&h(n,t[0])},i:t,o:t,d(t){t&&d(n),e[6](null),o=!1,r(s)}}}function V(t){const e=t.target.value;console.log(e),t.target.size=W(e)}function W(t){for(var e=0,n=0,o=t.length;n<o;n++)e+=t.charCodeAt(n)<256?1:2;return e}function X(t,e,n){let o,r,{disabled:s=!1}=e,{value:c}=e,{fontSize:l="1rem"}=e;return w((t=>{n(2,r.size=W(c),r)})),t.$$set=t=>{"disabled"in t&&n(1,s=t.disabled),"value"in t&&n(0,c=t.value),"fontSize"in t&&n(4,l=t.fontSize)},t.$$.update=()=>{16&t.$$.dirty&&n(3,o=`font-size: ${l}`)},[c,s,r,o,l,function(){c=this.value,n(0,c)},function(t){C[t?"unshift":"push"]((()=>{r=t,n(2,r)}))}]}class Y extends R{constructor(t){super(),Q(this,t,X,U,c,{disabled:1,value:0,fontSize:4})}}function Z(t){let e,n,o,r,s,c,l,i,$;function g(e){t[3](e)}let h={fontSize:"3rem",class:"",disabled:!t[2]};function b(e){t[4](e)}void 0!==t[0]&&(h.value=t[0]),o=new Y({props:h}),C.push((()=>F(o,"value",g)));let v={disabled:!t[2]};return void 0!==t[1]&&(v.value=t[1]),l=new Y({props:v}),C.push((()=>F(l,"value",b))),{c(){e=f("div"),n=f("div"),H(o.$$.fragment),s=p(),c=f("div"),H(l.$$.fragment),m(n,"class","card__content svelte-1sget3a"),m(c,"class","card__content svelte-1sget3a"),m(e,"class","card svelte-1sget3a")},m(t,r){u(t,e,r),a(e,n),G(o,n,null),a(e,s),a(e,c),G(l,c,null),$=!0},p(t,[e]){const n={};4&e&&(n.disabled=!t[2]),!r&&1&e&&(r=!0,n.value=t[0],I((()=>r=!1))),o.$set(n);const s={};4&e&&(s.disabled=!t[2]),!i&&2&e&&(i=!0,s.value=t[1],I((()=>i=!1))),l.$set(s)},i(t){$||(L(o.$$.fragment,t),L(l.$$.fragment,t),$=!0)},o(t){N(o.$$.fragment,t),N(l.$$.fragment,t),$=!1},d(t){t&&d(e),J(o),J(l)}}}function tt(t,e,n){let{editable:o=!1}=e,{en:r}=e,{tw:s}=e;return t.$$set=t=>{"editable"in t&&n(2,o=t.editable),"en"in t&&n(0,r=t.en),"tw"in t&&n(1,s=t.tw)},[r,s,o,function(t){r=t,n(0,r)},function(t){s=t,n(1,s)}]}class et extends R{constructor(t){super(),Q(this,t,tt,Z,c,{editable:2,en:0,tw:1})}}function nt(t){let e,n,o,r,s;const c=t[3].default,$=function(t,e,n,o){if(t){const r=l(t,e,n,o);return t[0](r)}}(c,t,t[2],null);return{c(){e=f("button"),n=f("span"),$&&$.c(),m(n,"class","a-btn__content svelte-10bq2q6"),m(e,"class","a-btn svelte-10bq2q6"),b(e,"a-btn--dark",t[0])},m(c,l){u(c,e,l),a(e,n),$&&$.m(n,null),o=!0,r||(s=g(e,"click",t[1]),r=!0)},p(t,[n]){$&&$.p&&4&n&&i($,c,t,t[2],n,null,null),1&n&&b(e,"a-btn--dark",t[0])},i(t){o||(L($,t),o=!0)},o(t){N($,t),o=!1},d(t){t&&d(e),$&&$.d(t),r=!1,s()}}}function ot(t,e,n){let{$$slots:o={},$$scope:r}=e;const s=x();let{dark:c=!1}=e;return t.$$set=t=>{"dark"in t&&n(0,c=t.dark),"$$scope"in t&&n(2,r=t.$$scope)},[c,function(t){s("click",t)},r,o]}class rt extends R{constructor(t){super(),Q(this,t,ot,nt,c,{dark:0})}}function st(t){let e;return{c(){e=$("ADD")},m(t,n){u(t,e,n)},d(t){t&&d(e)}}}function ct(t){let e,n,o,r,s,c,l,i;function $(e){t[3](e)}function g(e){t[4](e)}let h={editable:!0};return void 0!==t[0]&&(h.en=t[0]),void 0!==t[1]&&(h.tw=t[1]),n=new et({props:h}),C.push((()=>F(n,"en",$))),C.push((()=>F(n,"tw",g))),l=new rt({props:{dark:!0,$$slots:{default:[st]},$$scope:{ctx:t}}}),l.$on("click",t[5]),{c(){e=f("div"),H(n.$$.fragment),s=p(),c=f("div"),H(l.$$.fragment),m(c,"class","my-1 card-maker__add-btn svelte-12ijpri"),m(e,"class","card-maker svelte-12ijpri")},m(t,o){u(t,e,o),G(n,e,null),a(e,s),a(e,c),G(l,c,null),i=!0},p(t,[e]){const s={};!o&&1&e&&(o=!0,s.en=t[0],I((()=>o=!1))),!r&&2&e&&(r=!0,s.tw=t[1],I((()=>r=!1))),n.$set(s);const c={};64&e&&(c.$$scope={dirty:e,ctx:t}),l.$set(c)},i(t){i||(L(n.$$.fragment,t),L(l.$$.fragment,t),i=!0)},o(t){N(n.$$.fragment,t),N(l.$$.fragment,t),i=!1},d(t){t&&d(e),J(n),J(l)}}}function lt(t,e,n){let o="Hello",r="你好";const s=x();return[o,r,s,function(t){o=t,n(0,o)},function(t){r=t,n(1,r)},t=>s("add-card",{en:o,tw:r})]}class it extends R{constructor(t){super(),Q(this,t,lt,ct,c,{})}}const at=[];let ut;function dt(t=(()=>{})){var e;w((async()=>{ut=await new Promise(((t,e)=>{const n=indexedDB.open("Flashcard",3);n.onerror=t=>{console.error("init indexed db error"),console.error(t.target.errorCode),e(t)},n.onsuccess=e=>{t(e.target.result)},n.onupgradeneeded=t=>{ut=t.target.result,console.log("indexed db upgradeneeded");const e=ut.createObjectStore("cards",{autoIncrement:!0});console.log(e)}})),t()})),e=()=>{ut.close()},k().$$.on_destroy.push(e);const n=t=>ut.transaction([t],"readwrite").objectStore(t);return{addItem:t=>new Promise(((e,o)=>{const r=n("cards").add(t);r.onsuccess=t=>e(t.target.result),r.onerror=t=>o(t)})),addItems:t=>{const e=n("cards");for(let n in t){e.add(t[n]).onsuccess=t=>{resolve(t)}}},getAll:async()=>(at.length=0,new Promise(((t,e)=>{n("cards").openCursor().onsuccess=e=>{const n=e.target.result;n?(at.push({...n.value,key:n.key}),n.continue()):(console.log("get all finish!",at),t(at))}}))),clearAll:async()=>new Promise(((t,e)=>{const o=n("cards").clear();o.onsuccess=e=>{t(e)},o.onerror=t=>{e(t)}})),deleteItem:async t=>new Promise(((e,o)=>{const r=n("cards").delete(t);r.onsuccess=t=>e(t),r.onerror=t=>o(t)}))}}function ft(t,e,n){const o=t.slice();return o[8]=e[n],o}function $t(t){let e;return{c(){e=$("Clear Card Table in DB")},m(t,n){u(t,e,n)},d(t){t&&d(e)}}}function pt(t){let e;return{c(){e=$("This is my card")},m(t,n){u(t,e,n)},d(t){t&&d(e)}}}function gt(t,n){let o,r,c,l,i,$,h,b;const v=[{key:n[8].key},n[8]];let y={$$slots:{default:[pt]},$$scope:{ctx:n}};for(let t=0;t<v.length;t+=1)y=e(y,v[t]);return r=new et({props:y}),{key:t,first:null,c(){o=f("div"),H(r.$$.fragment),c=p(),l=f("button"),l.textContent="x",i=p(),m(l,"class","card__cancel-btn svelte-ogdi1b"),m(o,"class","card__wrapper svelte-ogdi1b"),this.first=o},m(t,e){u(t,o,e),G(r,o,null),a(o,c),a(o,l),a(o,i),$=!0,h||(b=g(l,"click",(function(){s(n[3](n[8]))&&n[3](n[8]).apply(this,arguments)})),h=!0)},p(t,e){n=t;const o=1&e?function(t,e){const n={},o={},r={$$scope:1};let s=t.length;for(;s--;){const c=t[s],l=e[s];if(l){for(const t in c)t in l||(o[t]=1);for(const t in l)r[t]||(n[t]=l[t],r[t]=1);t[s]=l}else for(const t in c)r[t]=1}for(const t in o)t in n||(n[t]=void 0);return n}(v,[{key:n[8].key},(s=n[8],"object"==typeof s&&null!==s?s:{})]):{};var s;2048&e&&(o.$$scope={dirty:e,ctx:n}),r.$set(o)},i(t){$||(L(r.$$.fragment,t),$=!0)},o(t){N(r.$$.fragment,t),$=!1},d(t){t&&d(o),J(r),h=!1,b()}}}function mt(t){let e,n,o,s,c,l,i,$,g,h,b,v=[],y=new Map;n=new rt({props:{$$slots:{default:[$t]},$$scope:{ctx:t}}}),n.$on("click",t[2]),l=new it({}),l.$on("add-card",t[1]);let k=t[0];const w=t=>t[8].key;for(let e=0;e<k.length;e+=1){let n=ft(t,k,e),o=w(n);y.set(o,v[e]=gt(o,n))}return{c(){e=f("main"),H(n.$$.fragment),o=p(),s=f("h2"),s.textContent="Add Card",c=p(),H(l.$$.fragment),i=p(),$=f("h2"),$.textContent="Cards",g=p(),h=f("div");for(let t=0;t<v.length;t+=1)v[t].c();m(s,"class","title svelte-ogdi1b"),m($,"class","title svelte-ogdi1b"),m(h,"class","card__container svelte-ogdi1b")},m(t,r){u(t,e,r),G(n,e,null),a(e,o),a(e,s),a(e,c),G(l,e,null),a(e,i),a(e,$),a(e,g),a(e,h);for(let t=0;t<v.length;t+=1)v[t].m(h,null);b=!0},p(t,[e]){const o={};2048&e&&(o.$$scope={dirty:e,ctx:t}),n.$set(o),9&e&&(k=t[0],B={r:0,c:[],p:B},v=function(t,e,n,o,r,s,c,l,i,a,u,d){let f=t.length,$=s.length,p=f;const g={};for(;p--;)g[t[p].key]=p;const m=[],h=new Map,b=new Map;for(p=$;p--;){const t=d(r,s,p),l=n(t);let i=c.get(l);i?o&&i.p(t,e):(i=a(l,t),i.c()),h.set(l,m[p]=i),l in g&&b.set(l,Math.abs(p-g[l]))}const v=new Set,y=new Set;function k(t){L(t,1),t.m(l,u),c.set(t.key,t),u=t.first,$--}for(;f&&$;){const e=m[$-1],n=t[f-1],o=e.key,r=n.key;e===n?(u=e.first,f--,$--):h.has(r)?!c.has(o)||v.has(o)?k(e):y.has(r)?f--:b.get(o)>b.get(r)?(y.add(o),k(e)):(v.add(r),f--):(i(n,c),f--)}for(;f--;){const e=t[f];h.has(e.key)||i(e,c)}for(;$;)k(m[$-1]);return m}(v,e,w,1,t,k,y,h,T,gt,null,ft),B.r||r(B.c),B=B.p)},i(t){if(!b){L(n.$$.fragment,t),L(l.$$.fragment,t);for(let t=0;t<k.length;t+=1)L(v[t]);b=!0}},o(t){N(n.$$.fragment,t),N(l.$$.fragment,t);for(let t=0;t<v.length;t+=1)N(v[t]);b=!1},d(t){t&&d(e),J(n),J(l);for(let t=0;t<v.length;t+=1)v[t].d()}}}function ht(t,e,n){let o=[];const{addItem:r,getAll:s,clearAll:c,deleteItem:l}=dt((async()=>{n(0,o=await s())}));return[o,async function({detail:t}){const e=await r(t);o.push({...t,key:e}),n(0,o)},async function(){await c(),n(0,o=await s())},function(t){const e=o.indexOf(t);-1!==e&&o.splice(e,1),n(0,o),l(t.key)}]}return new class extends R{constructor(t){super(),Q(this,t,ht,mt,c,{})}}({target:document.body,props:{name:"world"}})}();
//# sourceMappingURL=bundle.js.map
